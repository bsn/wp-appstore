(function(){(function(a){var b;b=function(d,e){var j,x,r,u,g,o,t,p,v,m,w,c,h,y,f,q,l,s,n,z,k;y=a.extend({},a.fn.ramblingSlider.defaults,e);n={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};o={};g={setSliderBackground:function(i,A){return i.css({background:"url("+(A.currentImage.attr("src"))+") no-repeat"})},getRamblingSlice:function(E,i,C,D){var A,F,B;A="url("+(D.currentImage.attr("src"))+") no-repeat -"+((E+(i*E))-E)+"px 0%";B=E;if(i===(C-1)){A="url("+(D.currentImage.attr("src"))+") no-repeat -"+((E+(i*E))-E)+"px 0%";B=q.width()-(E*i)}F={left:(E*i)+"px",width:B+"px",height:"0px",opacity:"0",background:A,overflow:"hidden"};return a('<div class="rambling-slice"></div>').css(F)},getRamblingBox:function(D,F,H,B,C,E){var i,G,A;i="url("+(E.currentImage.attr("src"))+") no-repeat -"+((D+(B*D))-D)+"px -"+((F+(H*F))-F)+"px";A=D;if(B===(C.boxCols-1)){i="url("+(E.currentImage.attr("src"))+") no-repeat -"+((D+(B*D))-D)+"px -"+((F+(H*F))-F)+"px";A=q.width()-(D*B)}G={opacity:0,left:(D*B)+"px",top:(F*H)+"px",width:A+"px",height:F+"px",background:i,overflow:"hidden"};return a('<div class="rambling-box"></div>').css(G)}};j={setSliderBackground:function(){var B,i,A;A=n.currentImage;i=q.find(".currentImage");if(!i.length){B="alignTop";if(y.alignBottom){B="alignBottom"}i=a('<img src="" alt="currentImage" class="currentImage"/>');i.addClass(B);i.css({display:"block"});q.find("#rambling-animation").prepend(i)}return i.attr({src:A.attr("src"),alt:A.attr("alt")})},getRamblingSlice:function(G,i,D,F){var B,C,A,E;C=g.getRamblingSlice(G,i,D,F);C.css({background:"none"});C.append('<span><img src="'+(F.currentImage.attr("src"))+'" alt=""/></span>');B=0;E="auto";if(y.alignBottom){B="auto";E=0}A={display:"block",width:q.width(),left:"-"+((G+(i*G))-G)+"px",bottom:B,top:E};C.find("img").css(A);return C},getRamblingBox:function(E,G,I,B,C,F){var i,D,A,H;D=g.getRamblingBox(E,G,I,B,C,F);i=false;H=""+((G+(I*G))-G)+"px";if(C.alignBottom){i=""+(G*(C.boxRows-(I+1)))+"px";H=false}A={display:"block",width:q.width(),left:"-"+((E+(B*E))-E)+"px",top:"auto",bottom:"auto"};if(H){A.top="-"+H}if(i){A.bottom="-"+i}D.css({background:"none",top:H||"auto",bottom:i||"auto"});D.append('<span><img src="'+F.currentImage.attr("src")+'" alt=""/></span>');D.find("img").css(A);return D}};a.extend(o,g);if(y.adaptImages){a.extend(o,j)}q=a(d);q.data("rambling:vars",n);q.css({position:"relative"});q.addClass("ramblingSlider");if(y.adaptImages){w=a('<div id="rambling-animation"></div>');w.css({width:q.width(),height:q.height(),overflow:"hidden"});q.prepend(w);q.addClass("adaptingSlider")}p=q.children(":not(#rambling-animation)");p.each(function(){var C,i,A,B;C=a(this);B="";if(!C.is("img")){if(C.is("a")){C.addClass("rambling-imageLink");B=C}C=C.find("img:first")}A=C.width();if(A===0){A=C.attr("width")}i=C.height();if(i===0){i=C.attr("height")}if(A>q.width()&&y.useLargerImage){q.width(A)}if(i>q.height()&&(y.useLargerImage||!y.adaptImages)){q.height(i)}if(B!==""){B.css({display:"none"})}C.css({display:"none"});return n.totalSlides++});if(y.startSlide>0){if(y.startSlide>=n.totalSlides){y.startSlide=n.totalSlides-1}n.currentSlide=y.startSlide}if(a(p[n.currentSlide]).is("img")){n.currentImage=a(p[n.currentSlide])}else{n.currentImage=a(p[n.currentSlide]).find("img:first")}if(a(p[n.currentSlide]).is("a")){a(p[n.currentSlide]).css("display","block")}o.setSliderBackground(q,n);q.append(a('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:y.captionOpacity}));m=function(A){var i,B;i=a(".rambling-caption",q);B=n.currentImage.attr("title");if((B!=null)&&B!==""){if(B.substr(0,1)==="#"){B=a(B).html()}if(i.css("display")==="block"){i.find("p").fadeOut(A.animSpeed,function(){a(this).html(B);return a(this).fadeIn(A.animSpeed)})}else{i.find("p").html(B)}return i.fadeIn(A.animSpeed)}else{return i.fadeOut(A.animSpeed)}};m(y);l=0;if(!y.manualAdvance&&p.length>1){l=setInterval((function(){return h(q,p,y,false)}),y.pauseTime)}x=function(){clearInterval(l);return l=""};if(y.directionNav){q.append('<div class="rambling-directionNav"><a class="rambling-prevNav">'+y.prevText+'</a><a class="rambling-nextNav">'+y.nextText+"</a></div>");if(y.directionNavHide){a(".rambling-directionNav",q).hide();q.hover((function(){return a(".rambling-directionNav",q).show()}),(function(){return a(".rambling-directionNav",q).hide()}))}v=function(B,i,A,C){if(n.running){return false}x();n.currentSlide-=2;return h(B,i,A,C)};a("a.rambling-prevNav",q).live("click",function(){return v("prev")});a("a.rambling-nextNav",q).live("click",function(){return v("next")})}if(y.controlNav){c=a('<div class="rambling-controlNav"></div>');q.append(c);z=function(A){var B;if(y.controlNavThumbs){B=p.eq(A);if(!B.is("img")){B=B.find("img:first")}if(y.controlNavThumbsFromRel){return c.append('<a class="rambling-control" rel="'+A+'"><img src="'+B.attr("rel")+'" alt="" /></a>')}else{return c.append('<a class="rambling-control" rel="'+A+'"><img src="'+B.attr("src").replace(y.controlNavThumbsSearch,y.controlNavThumbsReplace)+'" alt="" /></a>')}}else{return c.append('<a class="rambling-control" rel="'+A+'">'+(A+1)+"</a>")}};for(t=0,k=p.length-1;0<=k?t<=k:t>=k;0<=k?t++:t--){z(t)}a(".rambling-controlNav a:eq("+n.currentSlide+")",q).addClass("active");a(".rambling-controlNav a",q).live("click",function(){if(n.running){return false}if(a(this).hasClass("active")){return false}x();o.setSliderBackground(q,n);n.currentSlide=a(this).attr("rel")-1;return h(q,p,y,"control")})}if(y.keyboardNav){a(window).keypress(function(i){if(i.keyCode==="37"){if(n.running){return false}x();n.currentSlide-=2;h(q,p,y,"prev")}if(i.keyCode==="39"){if(n.running){return false}x();return h(q,p,y,"next")}})}if(y.pauseOnHover){q.hover(function(){n.paused=true;return x()},function(){n.paused=false;if(l===""&&!y.manualAdvance){return l=setInterval((function(){return h(q,p,y,false)}),y.pauseTime)}})}q.bind("rambling:animFinished",function(){n.running=false;a(p).each(function(){if(a(this).is("a")){return a(this).css({display:"none"})}});if(a(p[n.currentSlide]).is("a")){a(p[n.currentSlide]).css({display:"block"})}if(l===""&&!n.paused&&!y.manualAdvance){l=setInterval((function(){return h(q,p,y,false)}),y.pauseTime)}o.setSliderBackground(q,n);return y.afterChange.call(this)});u=function(D,C,E){var B,F,A;A=[];for(B=0,F=C.slices-1;0<=F?B<=F:B>=F;0<=F?B++:B--){A.push((function(H){var G,I;I=Math.round(D.width()/C.slices);G=D;if(C.adaptImages){G=D.find("#rambling-animation")}return G.append(o.getRamblingSlice(I,H,C.slices,E))})(B))}return A};r=function(C,A,E){var F,B,D,G,i;B=Math.round(C.width()/A.boxCols);F=Math.round(C.height()/A.boxRows);i=[];for(D=0,G=A.boxRows-1;0<=G?D<=G:D>=G;0<=G?D++:D--){i.push((function(I){var J,K,H;H=[];for(J=0,K=A.boxCols-1;0<=K?J<=K:J>=K;0<=K?J++:J--){H.push((function(M){var L;L=C;if(A.adaptImages){L=C.find("#rambling-animation")}return L.append(o.getRamblingBox(B,F,I,M,A,E))})(J))}return H})(D))}return i};h=function(M,L,O,J){var Q,I,C,K,G,F,E,D,A,P,N,H,B,i;n=M.data("rambling:vars");if(n&&n.currentSlide===n.totalSlides-1){O.lastSlide.call(this)}if((!n||n.stop)&&!J){return false}O.beforeChange.call(this);n.currentSlide++;if(n.currentSlide===n.totalSlides){n.currentSlide=0;O.slideshowEnd.call(this)}if(n.currentSlide<0){n.currentSlide=n.totalSlides-1}if(a(L[n.currentSlide]).is("img")){n.currentImage=a(L[n.currentSlide])}else{n.currentImage=a(L[n.currentSlide]).find("img:first")}if(O.controlNav){a(".rambling-controlNav a",M).removeClass("active");a(".rambling-controlNav a:eq("+n.currentSlide+")",M).addClass("active")}m(O);a(".rambling-slice",M).remove();a(".rambling-box",M).remove();if(O.effect==="random"){Q=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];n.randAnim=Q[Math.floor(Math.random()*(Q.length+1))];if(!n.randAnim){n.randAnim="fade"}}if(O.effect.indexOf(",")!==-1){Q=O.effect.split(",");n.randAnim=Q[Math.floor(Math.random()*Q.length)];if(n.randAnim){n.randAnim="fade"}}n.running=true;if(O.effect==="sliceDown"||O.effect==="sliceDownRight"||n.randAnim==="sliceDownRight"||O.effect==="sliceDownLeft"||n.randAnim==="sliceDownLeft"){u(M,O,n);P=0;t=0;A=a(".rambling-slice",M);if(O.effect==="sliceDownLeft"||n.randAnim==="sliceDownLeft"){A=a(".rambling-slice",M)._reverse()}return A.each(function(){var R;R=a(this);R.css({top:"0px"});if(t===O.slices-1){setTimeout(function(){return R.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){return M.trigger("rambling:animFinished")})},100+P)}else{setTimeout((function(){return R.animate({height:"100%",opacity:"1.0"},O.animSpeed)}),100+P)}P+=50;return t++})}else{if(O.effect==="sliceUp"||O.effect==="sliceUpRight"||n.randAnim==="sliceUpRight"||O.effect==="sliceUpLeft"||n.randAnim==="sliceUpLeft"){u(M,O,n);P=0;t=0;A=a(".rambling-slice",M);if(O.effect==="sliceUpLeft"||n.randAnim==="sliceUpLeft"){A=a(".rambling-slice",M)._reverse()}return A.each(function(){var R;R=a(this);R.css({bottom:"0px"});if(t===O.slices-1){setTimeout((function(){return R.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){return M.trigger("rambling:animFinished")})}),100+P)}else{setTimeout((function(){return R.animate({height:"100%",opacity:"1.0"},O.animSpeed)}),100+P)}P+=50;return t++})}else{if(O.effect==="sliceUpDown"||O.effect==="sliceUpDownRight"||n.randAnim==="sliceUpDown"||O.effect==="sliceUpDownLeft"||n.randAnim==="sliceUpDownLeft"){u(M,O,n);P=0;t=0;H=0;A=a(".rambling-slice",M);if(O.effect==="sliceUpDownLeft"||n.randAnim==="sliceUpDownLeft"){A=a(".rambling-slice",M)._reverse()}return A.each(function(){var R;R=a(this);if(t===0){R.css("top","0px");t++}else{R.css("bottom","0px");t=0}if(H===O.slices-1){setTimeout((function(){return R.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){return M.trigger("rambling:animFinished")})}),100+P)}else{setTimeout((function(){return R.animate({height:"100%",opacity:"1.0"},O.animSpeed)}),100+P)}P+=50;return H++})}else{if(O.effect==="fold"||n.randAnim==="fold"){u(M,O,n);P=0;t=0;return a(".rambling-slice",M).each(function(){var S,R;R=a(this);S=R.width();R.css({top:"0px",height:"100%",width:"0px"});if(t===O.slices-1){setTimeout((function(){return R.animate({width:S,opacity:"1.0"},O.animSpeed,"",function(){return M.trigger("rambling:animFinished")})}),100+P)}else{setTimeout((function(){return R.animate({width:S,opacity:"1.0"},O.animSpeed)}),100+P)}P+=50;return t++})}else{if(O.effect==="fade"||n.randAnim==="fade"){u(M,O,n);F=a(".rambling-slice:first",M);D={height:"100%",width:M.width()+"px",position:"absolute",top:0,left:0};F.css(D);return F.animate({opacity:"1.0"},O.animSpeed*2,"",function(){return M.trigger("rambling:animFinished")})}else{if(O.effect==="slideInRight"||n.randAnim==="slideInRight"){u(M,O,n);F=a(".rambling-slice:first",M);D={height:"100%",width:"0px",opacity:"1"};F.css(D);return F.animate({width:M.width()+"px"},O.animSpeed*2,"",function(){return M.trigger("rambling:animFinished")})}else{if(O.effect==="slideInLeft"||n.randAnim==="slideInLeft"){u(M,O,n);F=a(".rambling-slice:first",M);D={height:"100%",width:"0px",opacity:"1",left:"",right:"0px"};F.css(D);return F.animate({width:M.width()+"px"},O.animSpeed*2,"",function(){var R;R={left:"0px",right:""};F.css(R);return M.trigger("rambling:animFinished")})}else{if(O.effect==="boxRandom"||n.randAnim==="boxRandom"){r(M,O,n);N=O.boxCols*O.boxRows;t=0;P=0;C=f(a(".rambling-box",M));return C.each(function(){var R;R=a(this);if(t===N-1){setTimeout((function(){return R.animate({opacity:"1"},O.animSpeed,"",function(){return M.trigger("rambling:animFinished")})}),100+P)}else{setTimeout((function(){return R.animate({opacity:"1"},O.animSpeed)}),100+P)}P+=20;return t++})}else{if(O.effect==="boxRain"||n.randAnim==="boxRain"||O.effect==="boxRainReverse"||n.randAnim==="boxRainReverse"||O.effect==="boxRainGrow"||n.randAnim==="boxRainGrow"||O.effect==="boxRainGrowReverse"||n.randAnim==="boxRainGrowReverse"){r(M,O,n);N=O.boxCols*O.boxRows;t=0;P=0;E=0;K=0;I=new Array();I[E]=new Array();C=a(".rambling-box",M);if(O.effect==="boxRainReverse"||n.randAnim==="boxRainReverse"||O.effect==="boxRainGrowReverse"||n.randAnim==="boxRainGrowReverse"){C=a(".rambling-box",M)._reverse()}C.each(function(){I[E][K]=a(this);K++;if(K===O.boxCols){E++;K=0;return I[E]=new Array()}});i=[];for(G=0,B=O.boxCols*2-1;0<=B?G<=B:G>=B;0<=B?G++:G--){i.push((function(U){var S,T,R,V;S=U;R=function(W){if(S>=0&&S<O.boxCols){(function(ad,Y,ac,Z,ae){var ab,aa,X;ab=a(I[ad][Y]);X=ab.width();aa=ab.height();if(O.effect==="boxRainGrow"||n.randAnim==="boxRainGrow"||O.effect==="boxRainGrowReverse"||n.randAnim==="boxRainGrowReverse"){ab.width(0).height(0)}if(Z===ae-1){return setTimeout((function(){return ab.animate({opacity:"1",width:X,height:aa},O.animSpeed/1.3,"",function(){return M.trigger("rambling:animFinished")})}),100+ac)}else{return setTimeout((function(){return ab.animate({opacity:"1",width:X,height:aa},O.animSpeed/1.3)}),100+ac)}})(W,S,P,t,N);t++}return S--};for(T=0,V=O.boxRows-1;0<=V?T<=V:T>=V;0<=V?T++:T--){R(T)}return P+=100})(G))}return i}}}}}}}}}};f=function(A){var C,B,D;B=function(G){var F,E;F=parseInt(Math.random()*G);E=A[--G];A[G]=A[F];return A[F]=E};for(C=D=A.length;D<=1?C<=1:C>=1;D<=1?C++:C--){B(C)}return A};s=function(i){if(this.console&&console&&console.log){return console.log(i)}};this.stop=function(){var i;i=a(d);if(!i.data("rambling:vars").stop){i.data("rambling:vars").stop=true;return s("Stop Slider")}};this.start=function(){var i;i=a(d);if(i.data("rambling:vars").stop){i.data("rambling:vars").stop=false;return s("Start Slider")}};y.afterLoad.call(this);return this};a.fn.ramblingSlider=function(c){return this.each(function(e,g){var d,f;d=a(this);if(d.data("ramblingslider")){return d.data("ramblingslider")}f=new b(this,c);return d.data("ramblingslider",f)})};a.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return a.fn._reverse=[].reverse})(jQuery)}).call(this);